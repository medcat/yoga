digraph machine {

  rankdir="LR";
  node [fontsize=10.0 fontname="courier"];
  edge [fontsize=10.0 fontname="courier" arrowhead="vee"];

  starting [shape=point];
<% if parts.any?(&:stuck?) -%>
  pstuck [fontcolor=red];
<% end -%>

<% starting.each do |part| -%>
  starting -> p<%= part.id %> [label="start" fontcolor=cornflowerblue];
<% end -%>

<% parts.each do |part| -%>
  p<%= part.id %> [label="<%= part.id[0..9] %>" <% if part.accepting %> shape="box" <% end %>];
<%   part.transitions.each do |on, to| %>
    p<%= part.id %> -> p<%= to.id %> [label="<%= on.to_s %>"]
<%   end -%>
<% end -%>

  alphabet [label="alphabet: \n<%= stringify_alphabet %>" shape="box" fontsize=8.0];
}
