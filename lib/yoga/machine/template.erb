digraph machine {

  rankdir="LR";
  node [fontsize=10.0 shape="circle"];
  edge [fontsize=10.0 fontname="courier" arrowhead="vee"];

  starting [shape=point];
<% if false && parts.any?(&:stuck?) -%>
  pstuck [fontcolor=red];
<% end -%>

<% starting.each do |part| -%>
  starting -> p<%= part.id %> [label="start" fontcolor=cornflowerblue fontname="Times-Roman"];
<% end -%>

<% parts.each_with_index do |part, i| -%>
  p<%= part.id %> [label="<%= i %>" <% if part.accepting? %> shape="doublecircle" <% end %>];
<%   part.transitions.each do |transition| %>
    p<%= if part then part.id else "" end %> -> p<%= if transition.to then transition.to.id else "" end %> [label="<%= transition.stringify %>"]
<%   end -%>
<% end -%>

  #alphabet [label="alphabet: \n<%= stringify_alphabet %>" shape="box" fontsize=8.0];
}
