Productions:
43
   0 $start: expression $                        
   1 expression: group                           { |_|    [_]          }
   2 expression: group expression                { |a, b| b.unshift(a) }
   3 group: group modifier                       { |a, b|    compile_modifier(b, a) }
   4 group: group binop group                    { |a, b, c| compile_binop(b, a, c) }
   5 group: value                                
   6 modifier: "*"                               { |_| _[0] }
   7 modifier: "+"                               { |_| _[0] }
   8 modifier: "?"                               { |_| _[0] }
   9 binop: "|"                                  { |_| _[0] }
  10 binop: "&"                                  { |_| _[0] }
  11 binop: "--"                                 { |_| _[0] }
  12 binop: "-"                                  { |_| _[0] }
  13 value: "(" expression ")"                   { |_, a, _| compile_paren(a)      }
  14 value: STRING                               { |_|       compile_string(_)     }
  15 value: contain                              { |_|       compile_contain(_)    }
  16 value: NUMBER                               { |_|       compile_number(_)     }
  17 value: identifier                           { |_|       compile_identifier(_) }
  18 contain: "[" contain.parts "]"              { |_, a, _| a }
  19 identifier: CHARACTER chars                 { |a, b| b.unshift(a)             }
  20 chars: char                                 { |_|    [_]                      }
  21 chars: char chars                           { |a, b| b.unshift(a)             }
  22 char: CHARACTER                             
  23 char: NUMBER                                
  24 char: "-"                                   
  25 contain.parts: contain.part                 { |_|    [_]          }
  26 contain.parts: contain.part contain.parts   { |a, b| b.unshift(a) }
  27 contain.part: contain.char                  
  28 contain.part: contain.char "-" contain.char { |a, b, c| [:SET, a[1], c[1]] }
  29 contain.part: "-"                           
  30 contain.char: CHARACTER                     
  31 contain.char: NUMBER                        
  32 contain.char: ESCAPED                       

Precedence:
  --- highest
  left     5:
    {UNION, INTERSECT, SDIFFERENCE, DIFFERENCE}
  right    4:
    {CHARACTER, NUMBER}
  left     3:
    {STAR, PLUS, OPTIONAL}
  nonassoc 2:
    {LPAREN, RPAREN}
  nonassoc 1:
    {_}
  nonassoc 0:
    {$}
  --- lowest

  State 0:
    0/n0: $start →  • expression $
      {}
    1/n1: expression →  • group
      {}
    2/n1: expression →  • group expression
      {}
    3/n1: group →  • group modifier
      {}
    4/n1: group →  • group binop group
      {}
    5/n1: group →  • value
      {}
    6/n2: value →  • "(" expression ")"
      {}
    7/n1: value →  • STRING
      {}
    8/n1: value →  • contain
      {}
    9/r4: value →  • NUMBER
      {}
    10/n1: value →  • identifier
      {}
    11/n1: contain →  • "[" contain.parts "]"
      {}
    12/r4: identifier →  • CHARACTER chars
      {}
    transitions:
      expression: State 1
      group: State 2
      value: State 3
      "(": State 4
      STRING: State 5
      contain: State 6
      NUMBER: State 7
      identifier: State 8
      "[": State 9
      CHARACTER: State 10

  State 1:
    13/n0: $start → expression • $
      {}
    transitions:
      $: State 11

  State 2:
    14/n1: expression → group • 
      {$, ")"}
    15/n1: expression → group • expression
      {}
    16/n1: expression →  • group
      {}
    17/n1: expression →  • group expression
      {}
    18/n1: group →  • group modifier
      {}
    19/n1: group →  • group binop group
      {}
    20/n1: group →  • value
      {}
    21/n2: value →  • "(" expression ")"
      {}
    22/n1: value →  • STRING
      {}
    23/n1: value →  • contain
      {}
    24/r4: value →  • NUMBER
      {}
    25/n1: value →  • identifier
      {}
    26/n1: contain →  • "[" contain.parts "]"
      {}
    27/r4: identifier →  • CHARACTER chars
      {}
    28/n1: group → group • modifier
      {}
    29/l3: modifier →  • "*"
      {}
    30/l3: modifier →  • "+"
      {}
    31/l3: modifier →  • "?"
      {}
    32/n1: group → group • binop group
      {}
    33/l5: binop →  • "|"
      {}
    34/l5: binop →  • "&"
      {}
    35/l5: binop →  • "--"
      {}
    36/l5: binop →  • "-"
      {}
    transitions:
      expression: State 12
      group: State 2
      value: State 3
      "(": State 4
      STRING: State 5
      contain: State 6
      NUMBER: State 7
      identifier: State 8
      "[": State 9
      CHARACTER: State 10
      modifier: State 13
      "*": State 14
      "+": State 15
      "?": State 16
      binop: State 17
      "|": State 18
      "&": State 19
      "--": State 20
      "-": State 21
    reductions:
      $: Rule 1
      ")": Rule 1

  State 3:
    37/n1: group → value • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 5
      "*": Rule 5
      "+": Rule 5
      "?": Rule 5
      "|": Rule 5
      "&": Rule 5
      "--": Rule 5
      "-": Rule 5
      "(": Rule 5
      STRING: Rule 5
      "[": Rule 5
      NUMBER: Rule 5
      CHARACTER: Rule 5
      ")": Rule 5

  State 4:
    38/n2: value → "(" • expression ")"
      {}
    39/n1: expression →  • group
      {}
    40/n1: expression →  • group expression
      {}
    41/n1: group →  • group modifier
      {}
    42/n1: group →  • group binop group
      {}
    43/n1: group →  • value
      {}
    44/n2: value →  • "(" expression ")"
      {}
    45/n1: value →  • STRING
      {}
    46/n1: value →  • contain
      {}
    47/r4: value →  • NUMBER
      {}
    48/n1: value →  • identifier
      {}
    49/n1: contain →  • "[" contain.parts "]"
      {}
    50/r4: identifier →  • CHARACTER chars
      {}
    transitions:
      expression: State 22
      group: State 2
      value: State 3
      "(": State 4
      STRING: State 5
      contain: State 6
      NUMBER: State 7
      identifier: State 8
      "[": State 9
      CHARACTER: State 10

  State 5:
    51/n1: value → STRING • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 14
      "*": Rule 14
      "+": Rule 14
      "?": Rule 14
      "|": Rule 14
      "&": Rule 14
      "--": Rule 14
      "-": Rule 14
      "(": Rule 14
      STRING: Rule 14
      "[": Rule 14
      NUMBER: Rule 14
      CHARACTER: Rule 14
      ")": Rule 14

  State 6:
    52/n1: value → contain • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 15
      "*": Rule 15
      "+": Rule 15
      "?": Rule 15
      "|": Rule 15
      "&": Rule 15
      "--": Rule 15
      "-": Rule 15
      "(": Rule 15
      STRING: Rule 15
      "[": Rule 15
      NUMBER: Rule 15
      CHARACTER: Rule 15
      ")": Rule 15

  State 7:
    53/r4: value → NUMBER • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 16
      "*": Rule 16
      "+": Rule 16
      "?": Rule 16
      "|": Rule 16
      "&": Rule 16
      "--": Rule 16
      "-": Rule 16
      "(": Rule 16
      STRING: Rule 16
      "[": Rule 16
      NUMBER: Rule 16
      CHARACTER: Rule 16
      ")": Rule 16

  State 8:
    54/n1: value → identifier • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 17
      "*": Rule 17
      "+": Rule 17
      "?": Rule 17
      "|": Rule 17
      "&": Rule 17
      "--": Rule 17
      "-": Rule 17
      "(": Rule 17
      STRING: Rule 17
      "[": Rule 17
      NUMBER: Rule 17
      CHARACTER: Rule 17
      ")": Rule 17

  State 9:
    55/n1: contain → "[" • contain.parts "]"
      {}
    56/n1: contain.parts →  • contain.part
      {}
    57/n1: contain.parts →  • contain.part contain.parts
      {}
    58/n1: contain.part →  • contain.char
      {}
    59/l5: contain.part →  • contain.char "-" contain.char
      {}
    60/l5: contain.part →  • "-"
      {}
    61/r4: contain.char →  • CHARACTER
      {}
    62/r4: contain.char →  • NUMBER
      {}
    63/n1: contain.char →  • ESCAPED
      {}
    transitions:
      contain.parts: State 23
      contain.part: State 24
      contain.char: State 25
      "-": State 26
      CHARACTER: State 27
      NUMBER: State 28
      ESCAPED: State 29

  State 10:
    64/r4: identifier → CHARACTER • chars
      {}
    65/n1: chars →  • char
      {}
    66/n1: chars →  • char chars
      {}
    67/r4: char →  • CHARACTER
      {}
    68/r4: char →  • NUMBER
      {}
    69/l5: char →  • "-"
      {}
    transitions:
      chars: State 30
      char: State 31
      CHARACTER: State 32
      NUMBER: State 33
      "-": State 34

  State 11:
    70/n0: $start → expression $ • 
      {}
    accepting:
      $: Rule 0

  State 12:
    71/n1: expression → group expression • 
      {$, ")"}
    reductions:
      $: Rule 2
      ")": Rule 2

  State 13:
    72/n1: group → group modifier • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 3
      "*": Rule 3
      "+": Rule 3
      "?": Rule 3
      "|": Rule 3
      "&": Rule 3
      "--": Rule 3
      "-": Rule 3
      "(": Rule 3
      STRING: Rule 3
      "[": Rule 3
      NUMBER: Rule 3
      CHARACTER: Rule 3
      ")": Rule 3

  State 14:
    73/l3: modifier → "*" • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 6
      "*": Rule 6
      "+": Rule 6
      "?": Rule 6
      "|": Rule 6
      "&": Rule 6
      "--": Rule 6
      "-": Rule 6
      "(": Rule 6
      STRING: Rule 6
      "[": Rule 6
      NUMBER: Rule 6
      CHARACTER: Rule 6
      ")": Rule 6

  State 15:
    74/l3: modifier → "+" • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 7
      "*": Rule 7
      "+": Rule 7
      "?": Rule 7
      "|": Rule 7
      "&": Rule 7
      "--": Rule 7
      "-": Rule 7
      "(": Rule 7
      STRING: Rule 7
      "[": Rule 7
      NUMBER: Rule 7
      CHARACTER: Rule 7
      ")": Rule 7

  State 16:
    75/l3: modifier → "?" • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 8
      "*": Rule 8
      "+": Rule 8
      "?": Rule 8
      "|": Rule 8
      "&": Rule 8
      "--": Rule 8
      "-": Rule 8
      "(": Rule 8
      STRING: Rule 8
      "[": Rule 8
      NUMBER: Rule 8
      CHARACTER: Rule 8
      ")": Rule 8

  State 17:
    76/n1: group → group binop • group
      {}
    77/n1: group →  • group modifier
      {}
    78/n1: group →  • group binop group
      {}
    79/n1: group →  • value
      {}
    80/n2: value →  • "(" expression ")"
      {}
    81/n1: value →  • STRING
      {}
    82/n1: value →  • contain
      {}
    83/r4: value →  • NUMBER
      {}
    84/n1: value →  • identifier
      {}
    85/n1: contain →  • "[" contain.parts "]"
      {}
    86/r4: identifier →  • CHARACTER chars
      {}
    transitions:
      group: State 35
      value: State 3
      "(": State 4
      STRING: State 5
      contain: State 6
      NUMBER: State 7
      identifier: State 8
      "[": State 9
      CHARACTER: State 10

  State 18:
    87/l5: binop → "|" • 
      {"*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER}
    reductions:
      "*": Rule 9
      "+": Rule 9
      "?": Rule 9
      "|": Rule 9
      "&": Rule 9
      "--": Rule 9
      "-": Rule 9
      "(": Rule 9
      STRING: Rule 9
      "[": Rule 9
      NUMBER: Rule 9
      CHARACTER: Rule 9

  State 19:
    88/l5: binop → "&" • 
      {"*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER}
    reductions:
      "*": Rule 10
      "+": Rule 10
      "?": Rule 10
      "|": Rule 10
      "&": Rule 10
      "--": Rule 10
      "-": Rule 10
      "(": Rule 10
      STRING: Rule 10
      "[": Rule 10
      NUMBER: Rule 10
      CHARACTER: Rule 10

  State 20:
    89/l5: binop → "--" • 
      {"*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER}
    reductions:
      "*": Rule 11
      "+": Rule 11
      "?": Rule 11
      "|": Rule 11
      "&": Rule 11
      "--": Rule 11
      "-": Rule 11
      "(": Rule 11
      STRING: Rule 11
      "[": Rule 11
      NUMBER: Rule 11
      CHARACTER: Rule 11

  State 21:
    90/l5: binop → "-" • 
      {"*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER}
    reductions:
      "*": Rule 12
      "+": Rule 12
      "?": Rule 12
      "|": Rule 12
      "&": Rule 12
      "--": Rule 12
      "-": Rule 12
      "(": Rule 12
      STRING: Rule 12
      "[": Rule 12
      NUMBER: Rule 12
      CHARACTER: Rule 12

  State 22:
    91/n2: value → "(" expression • ")"
      {}
    transitions:
      ")": State 36

  State 23:
    92/n1: contain → "[" contain.parts • "]"
      {}
    transitions:
      "]": State 37

  State 24:
    93/n1: contain.parts → contain.part • 
      {"]"}
    94/n1: contain.parts → contain.part • contain.parts
      {}
    95/n1: contain.parts →  • contain.part
      {}
    96/n1: contain.parts →  • contain.part contain.parts
      {}
    97/n1: contain.part →  • contain.char
      {}
    98/l5: contain.part →  • contain.char "-" contain.char
      {}
    99/l5: contain.part →  • "-"
      {}
    100/r4: contain.char →  • CHARACTER
      {}
    101/r4: contain.char →  • NUMBER
      {}
    102/n1: contain.char →  • ESCAPED
      {}
    transitions:
      contain.parts: State 38
      contain.part: State 24
      contain.char: State 25
      "-": State 26
      CHARACTER: State 27
      NUMBER: State 28
      ESCAPED: State 29
    reductions:
      "]": Rule 25

  State 25:
    103/n1: contain.part → contain.char • 
      {"]", CHARACTER, NUMBER, ESCAPED, "-"}
    104/l5: contain.part → contain.char • "-" contain.char
      {}
    transitions:
      "-": State 39
    reductions:
      "]": Rule 27
      CHARACTER: Rule 27
      NUMBER: Rule 27
      ESCAPED: Rule 27

  State 26:
    105/l5: contain.part → "-" • 
      {"]", CHARACTER, NUMBER, ESCAPED, "-"}
    reductions:
      "]": Rule 29
      CHARACTER: Rule 29
      NUMBER: Rule 29
      ESCAPED: Rule 29
      "-": Rule 29

  State 27:
    106/r4: contain.char → CHARACTER • 
      {"]", CHARACTER, NUMBER, ESCAPED, "-"}
    reductions:
      "]": Rule 30
      CHARACTER: Rule 30
      NUMBER: Rule 30
      ESCAPED: Rule 30
      "-": Rule 30

  State 28:
    107/r4: contain.char → NUMBER • 
      {"]", CHARACTER, NUMBER, ESCAPED, "-"}
    reductions:
      "]": Rule 31
      CHARACTER: Rule 31
      NUMBER: Rule 31
      ESCAPED: Rule 31
      "-": Rule 31

  State 29:
    108/n1: contain.char → ESCAPED • 
      {"]", CHARACTER, NUMBER, ESCAPED, "-"}
    reductions:
      "]": Rule 32
      CHARACTER: Rule 32
      NUMBER: Rule 32
      ESCAPED: Rule 32
      "-": Rule 32

  State 30:
    109/r4: identifier → CHARACTER chars • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 19
      "*": Rule 19
      "+": Rule 19
      "?": Rule 19
      "|": Rule 19
      "&": Rule 19
      "--": Rule 19
      "-": Rule 19
      "(": Rule 19
      STRING: Rule 19
      "[": Rule 19
      NUMBER: Rule 19
      CHARACTER: Rule 19
      ")": Rule 19

  State 31:
    110/n1: chars → char • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    111/n1: chars → char • chars
      {}
    112/n1: chars →  • char
      {}
    113/n1: chars →  • char chars
      {}
    114/r4: char →  • CHARACTER
      {}
    115/r4: char →  • NUMBER
      {}
    116/l5: char →  • "-"
      {}
    transitions:
      chars: State 40
      char: State 31
      CHARACTER: State 32
      NUMBER: State 33
      "-": State 34
    reductions:
      $: Rule 20
      "*": Rule 20
      "+": Rule 20
      "?": Rule 20
      "|": Rule 20
      "&": Rule 20
      "--": Rule 20
      "(": Rule 20
      STRING: Rule 20
      "[": Rule 20
      ")": Rule 20

  State 32:
    117/r4: char → CHARACTER • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 22
      "*": Rule 22
      "+": Rule 22
      "?": Rule 22
      "|": Rule 22
      "&": Rule 22
      "--": Rule 22
      "-": Rule 22
      "(": Rule 22
      STRING: Rule 22
      "[": Rule 22
      NUMBER: Rule 22
      CHARACTER: Rule 22
      ")": Rule 22

  State 33:
    118/r4: char → NUMBER • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 23
      "*": Rule 23
      "+": Rule 23
      "?": Rule 23
      "|": Rule 23
      "&": Rule 23
      "--": Rule 23
      "-": Rule 23
      "(": Rule 23
      STRING: Rule 23
      "[": Rule 23
      NUMBER: Rule 23
      CHARACTER: Rule 23
      ")": Rule 23

  State 34:
    119/l5: char → "-" • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 24
      "*": Rule 24
      "+": Rule 24
      "?": Rule 24
      "|": Rule 24
      "&": Rule 24
      "--": Rule 24
      "-": Rule 24
      "(": Rule 24
      STRING: Rule 24
      "[": Rule 24
      NUMBER: Rule 24
      CHARACTER: Rule 24
      ")": Rule 24

  State 35:
    120/n1: group → group binop group • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    121/n1: group → group • modifier
      {}
    122/l3: modifier →  • "*"
      {}
    123/l3: modifier →  • "+"
      {}
    124/l3: modifier →  • "?"
      {}
    125/n1: group → group • binop group
      {}
    126/l5: binop →  • "|"
      {}
    127/l5: binop →  • "&"
      {}
    128/l5: binop →  • "--"
      {}
    129/l5: binop →  • "-"
      {}
    transitions:
      modifier: State 13
      "*": State 14
      "+": State 15
      "?": State 16
      binop: State 17
      "|": State 18
      "&": State 19
      "--": State 20
      "-": State 21
    reductions:
      $: Rule 4
      "(": Rule 4
      STRING: Rule 4
      "[": Rule 4
      NUMBER: Rule 4
      CHARACTER: Rule 4
      ")": Rule 4

  State 36:
    130/n2: value → "(" expression ")" • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 13
      "*": Rule 13
      "+": Rule 13
      "?": Rule 13
      "|": Rule 13
      "&": Rule 13
      "--": Rule 13
      "-": Rule 13
      "(": Rule 13
      STRING: Rule 13
      "[": Rule 13
      NUMBER: Rule 13
      CHARACTER: Rule 13
      ")": Rule 13

  State 37:
    131/n1: contain → "[" contain.parts "]" • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 18
      "*": Rule 18
      "+": Rule 18
      "?": Rule 18
      "|": Rule 18
      "&": Rule 18
      "--": Rule 18
      "-": Rule 18
      "(": Rule 18
      STRING: Rule 18
      "[": Rule 18
      NUMBER: Rule 18
      CHARACTER: Rule 18
      ")": Rule 18

  State 38:
    132/n1: contain.parts → contain.part contain.parts • 
      {"]"}
    reductions:
      "]": Rule 26

  State 39:
    133/l5: contain.part → contain.char "-" • contain.char
      {}
    134/r4: contain.char →  • CHARACTER
      {}
    135/r4: contain.char →  • NUMBER
      {}
    136/n1: contain.char →  • ESCAPED
      {}
    transitions:
      contain.char: State 41
      CHARACTER: State 27
      NUMBER: State 28
      ESCAPED: State 29

  State 40:
    137/n1: chars → char chars • 
      {$, "*", "+", "?", "|", "&", "--", "-", "(", STRING, "[", NUMBER, CHARACTER, ")"}
    reductions:
      $: Rule 21
      "*": Rule 21
      "+": Rule 21
      "?": Rule 21
      "|": Rule 21
      "&": Rule 21
      "--": Rule 21
      "-": Rule 21
      "(": Rule 21
      STRING: Rule 21
      "[": Rule 21
      NUMBER: Rule 21
      CHARACTER: Rule 21
      ")": Rule 21

  State 41:
    138/l5: contain.part → contain.char "-" contain.char • 
      {"]", CHARACTER, NUMBER, ESCAPED, "-"}
    reductions:
      "]": Rule 28
      CHARACTER: Rule 28
      NUMBER: Rule 28
      ESCAPED: Rule 28
      "-": Rule 28

